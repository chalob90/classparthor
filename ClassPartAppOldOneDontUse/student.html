<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bootswatch: United</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="http://bootswatch.com/united/bootstrap.css" media="screen">
    <link rel="stylesheet" href="http://bootswatch.com/assets/css/bootswatch.min.css">
  </head>
  <body style="padding-top: 10px">
    
    <div class="container" id="namePrompt">
      <div class="page-header" id="banner">
        <div class="row">
          <div class="col-lg-12" style="text-align:center">
            <h1>Class Part App</h1>
            <p class="lead">First, tell us who you are</p>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12" style="padding: 25px 25px 15px 25px;">
            <div class="well bs-example form-horizontal">
              <fieldset>
                <div class="form-group">
                  <label for="inputEmail" class="col-lg-2 control-label">Your Name:</label>
                  <div class="col-lg-10">
                    <input type="text" class="form-control" id="myName" placeholder="eg. Alex Tan">
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-lg-12" style="text-align:right">
                    <button class="btn btn-primary" onclick="setMyName()">Submit</button>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
      </div>
    </div>
 
        
    <div class="container" id="raiseHand" style="display:none; margin-top:0px">
      <div class="page-header" id="banner" style="margin-top:0px;">
        <div class="row">
          <div class="col-lg-12" style="text-align:center">
            <h1>This is <span id="greetingName"></span></h1>
            <p class="lead">Click "Raise My Hand" to tell the professor you wanna class part (Ask/Answer a question)!</p>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12" style="text-align:center">
            <img id="image" src="boy.jpg"/>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12">
            <div class="well">
              <fieldset>
                <div class="form-group">
                  <div class="col-lg-12">
                    <button class="col-lg-6 btn btn-primary" onclick="raiseHand()">Raise My Hand!</button>
                    <button class="col-lg-6 btn btn-default" onclick="putDownHand()">Put it Down.</button>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-lg-12" style="color:green; text-align:center;" id="responses">
                    
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    
    
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://bootswatch.com/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="http://bootswatch.com/assets/js/bootswatch.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var myName;
      var socket = io.connect('/');
      var isRaised = false;
      function raiseHand(){
        if(!isRaised){
          socket.emit('raiseHand', { name: myName });
          $('#image').attr('src', 'boyraisehand.jpg');
          isRaised = true;
        }
      }
      function putDownHand(){
        socket.emit('putDown', { name: myName });
        $('#image').attr('src', 'boy.jpg');
        isRaised = false;
      }
      function setMyName(){
        myName = $('#myName').val();
        $('#greetingName').html(myName);
        $('#namePrompt').hide();
        $('#raiseHand').show();
      }
      
      socket.on('pickedMe', function (data) {
        if(myName == data.name){
          $('#responses').append('<h2>Registered your class part!</h2>');
        }
        setTimeout("$('#responses').html('')", 4000);
        putDownHand();
      });
      
    </script>
  </body>
</html>